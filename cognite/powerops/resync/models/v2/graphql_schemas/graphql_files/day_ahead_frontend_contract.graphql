type Bid @container(indexes: [{identifier : "startCalculation", fields : ["startCalculation"]}, {identifier : "endCalculation", fields : ["endCalculation"]}, {identifier : "date", fields : ["date"]}]) {
  name: String
  method: BidMethod
  priceArea: String
  date: Date
  total: JSONObject
  startCalculation: Timestamp!
  endCalculation: Timestamp
  market: MarketPriceArea
  alerts: [Alert]
  partials: [BidTable]
}

type Alert {
  time: Timestamp!
  title: String!
  description: String
  severity: String
  alertType: String
  statusCode: Int
  eventIds: [Int64]
  calculationRun: String
}

interface BidMethod {
  name: String!
}

type SHOP implements BidMethod @view(rawFilter: {prefix : {property : ["node", "externalId"], value : "SHOP"}}) @container(constraints: [{identifier : "requiredBidMethod", constraintType : REQUIRES, require : {space : "dayAheadFrontendContractModel", externalId : "BidMethod"}}]) {
  name: String!
  shopCases: [String]
  priceScenarios: TimeSeries
}

type WaterValueBased implements BidMethod @view(rawFilter: {prefix : {property : ["node", "externalId"], value : "WVB"}}) {
  name: String!
}

type MarketPriceArea {
  name: String
  priceArea: String
  defaultMethod: BidMethod
  timezone: String
  mainScenario: TimeSeries
  priceScenarios: [TimeSeries]
}

interface BidTable {
  resourceCost: String
  table: Sequence
  assetType: String
  asset_id: String
  alerts: [Alert]
}

type SHOPTable implements BidTable @view(rawFilter: {prefix : {property : ["node", "externalId"], value : "SHOP"}}) {
  resourceCost: String
  table: Sequence
  assetType: String
  asset_id: String
  alerts: [Alert]
  productionPricePair: ProductionPricePair
}

type ProductionPricePair {
  production: TimeSeries
  price: TimeSeries
}
